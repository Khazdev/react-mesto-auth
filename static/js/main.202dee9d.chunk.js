(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{24:function(e,t,a){e.exports=a.p+"static/media/logo.7d7dbe54.svg"},25:function(e,t,a){e.exports=a.p+"static/media/success.534aabc3.svg"},26:function(e,t,a){e.exports=a.p+"static/media/refuse.6063ab0d.svg"},28:function(e,t,a){e.exports=a(37)},36:function(e,t,a){},37:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(23),o=a.n(c),i=(a(36),a(6)),l=a(3),s=a(24),u=a.n(s),m=a(1),p=a(9);var d=function(e){var t=e.email,a=e.signOut;return r.a.createElement("header",{className:"header"},r.a.createElement("img",{className:"header__logo",src:u.a,alt:"\u041b\u043e\u0433\u043e"}),r.a.createElement("div",{className:"header__container"},t&&r.a.createElement("p",{className:"header__email"},t),r.a.createElement(m.d,null,r.a.createElement(m.b,{path:"/sign-up",element:r.a.createElement(p.a,{to:"/sign-in",className:"header__link"},"\u0412\u043e\u0439\u0442\u0438")}),r.a.createElement(m.b,{path:"/sign-in",element:r.a.createElement(p.a,{to:"/sign-up",className:"header__link"},"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f")}),r.a.createElement(m.b,{path:"/",element:r.a.createElement(p.a,{to:"/sign-in",className:"header__link",onClick:a},"\u0412\u044b\u0439\u0442\u0438")}))))},_=Object(n.createContext)();var f=function(e){var t=e.card,a=e.onCardClick,c=e.onDeleteClick,o=e.onLikeClick,i=Object(n.useContext)(_),l=t.owner._id===i._id,s=t.likes.some(function(e){return e._id===i._id}),u="elements__like-button ".concat(s&&"elements__like-button_active");return r.a.createElement("li",{className:"elements__list-item"},r.a.createElement("div",{className:"elements__photo-container",onClick:function(){a(t)}},r.a.createElement("img",{className:"elements__list-item-photo",src:t.link,alt:t.name}),r.a.createElement("div",{className:"elements__list-item-overlay"})),r.a.createElement("div",{className:"elements__list-item-description"},r.a.createElement("h2",{className:"elements__list-item-header"},t.name),r.a.createElement("div",{className:"elements__like-container"},r.a.createElement("button",{className:u,type:"button","aria-label":"\u0441\u0435\u0440\u0434\u0435\u0447\u043a\u043e-\u043b\u0430\u0439\u043a",onClick:function(){o(t)}}),r.a.createElement("span",{className:"elements__like-counter"},t.likes.length))),l&&r.a.createElement("button",{className:"elements__del-button","aria-label":"\u043a\u043d\u043e\u043f\u043a\u0430 \u0443\u0434\u0430\u043b\u0435\u043d\u0438\u044f \u043a\u0430\u0440\u0442\u043e\u0447\u043a\u0438",onClick:function(){c(t)}}))};var h=function(e){var t=e.cards,a=e.onEditAvatar,c=e.onEditProfile,o=e.onAddPlace,i=e.onCardClick,l=e.onDeleteClick,s=e.onLikeClick,u=Object(n.useContext)(_),m=u.avatar,p=u.name,d=u.about;return r.a.createElement("main",{className:"content"},r.a.createElement("section",{className:"profile"},r.a.createElement("div",{className:"profile__avatar-container",onClick:a},r.a.createElement("img",{className:"profile__avatar",src:m,alt:"\u0424\u043e\u0442\u043e\u0433\u0440\u0430\u0444\u0438\u044f-\u0430\u0432\u0430\u0442\u0430\u0440"})),r.a.createElement("div",{className:"profile__info"},r.a.createElement("h1",{className:"profile__name"},p),r.a.createElement("button",{className:"profile__edit-button",type:"button","aria-label":"\u0440\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u043f\u0440\u043e\u0444\u0438\u043b\u044c",onClick:c}),r.a.createElement("p",{className:"profile__bio"},d)),r.a.createElement("button",{className:"profile__add-button",type:"button","aria-label":"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0444\u043e\u0442\u043e-\u043a\u0430\u0440\u0442\u043e\u0447\u043a\u0443",onClick:o})),r.a.createElement("section",{className:"elements","aria-label":"\u043a\u0430\u0440\u0442\u043e\u0447\u043a\u0438"},r.a.createElement("ul",{className:"elements__list"},t.map(function(e){return r.a.createElement(f,{key:e._id,card:e,onCardClick:i,onDeleteClick:l,onLikeClick:s})}))))};var b=function(){return r.a.createElement("footer",{className:"footer"},r.a.createElement("p",{className:"footer__copyright",lang:"en"},"\xa9 2023 Mesto Russia"))};var E=function(e){var t=e.card,a=e.onClose,n=e.isOpened;return r.a.createElement("section",{className:"popup popup_type_image ".concat(n&&"popup_opened"),"aria-label":"\u0443\u0432\u0435\u043b\u0438\u0447\u0435\u043d\u043d\u044b\u0435 \u043a\u0430\u0440\u0442\u0438\u043d\u043a\u0438"},t&&r.a.createElement("figure",{className:"popup__image-container"},r.a.createElement("button",{className:"popup__close",type:"button","aria-label":"\u043a\u043d\u043e\u043f\u043a\u0430 \u0437\u0430\u043a\u0440\u044b\u0442\u044c \u043f\u043e\u043f\u0430\u043f",onClick:function(){a()}}),r.a.createElement("img",{className:"popup__image",src:"".concat(t.link),alt:t.name}),r.a.createElement("figcaption",{className:"popup__image-label"},t.name)))},v=a(7),g=a(8),k=new(function(){function e(t){Object(v.a)(this,e),this.baseurl=t.baseUrl,this.headers=t.headers}return Object(g.a)(e,[{key:"_request",value:function(e,t){return fetch(this.baseurl+e,t).then(this._checkResponse)}},{key:"getInitialCards",value:function(){return this._request("/cards",{headers:this.headers})}},{key:"getUserInfo",value:function(){return this._request("/users/me",{headers:this.headers})}},{key:"updateProfile",value:function(e,t){return this._request("/users/me",{method:"PATCH",headers:this.headers,body:JSON.stringify({name:e,about:t})})}},{key:"addCard",value:function(e,t){return this._request("/cards",{method:"POST",headers:this.headers,body:JSON.stringify({name:e,link:t})})}},{key:"deleteCard",value:function(e){return this._request("/cards/".concat(e),{method:"DELETE",headers:this.headers})}},{key:"_likeCard",value:function(e){return this._request("/cards/".concat(e,"/likes"),{method:"PUT",headers:this.headers})}},{key:"_unlikeCard",value:function(e){return this._request("/cards/".concat(e,"/likes"),{method:"DELETE",headers:this.headers})}},{key:"changeLikeCardStatus",value:function(e,t){return t?this._unlikeCard(e):this._likeCard(e)}},{key:"updateAvatar",value:function(e){return this._request("/users/me/avatar",{method:"PATCH",headers:this.headers,body:JSON.stringify({avatar:e})})}},{key:"_checkResponse",value:function(e){return e.ok?e.json():Promise.reject("Error: ".concat(e.status))}}]),e}())({baseUrl:"https://mesto.nomoreparties.co/v1/cohort-76",headers:{authorization:"beb01290-b862-4e63-9356-a8cedbbf4df4","Content-Type":"application/json"}}),O=a(21),N=new(function(){function e(t){Object(v.a)(this,e),this.baseurl=t.baseUrl,this.headers=t.headers}return Object(g.a)(e,[{key:"_request",value:function(e,t){return fetch(this.baseurl+e,t).then(this._checkResponse)}},{key:"_checkResponse",value:function(e){return e.ok?e.json():Promise.reject("Error: ".concat(e.status))}},{key:"signUp",value:function(e,t){return this._request("/signup",{method:"POST",headers:this.headers,body:JSON.stringify({password:t,email:e})})}},{key:"signIn",value:function(e,t){return this._request("/signin",{method:"POST",headers:this.headers,body:JSON.stringify({password:t,email:e})})}},{key:"validToken",value:function(e){return this._request("/users/me",{method:"GET",headers:Object(O.a)(Object(O.a)({},this.headers),{},{Authorization:"Bearer ".concat(e)})})}}]),e}())({baseUrl:"https://auth.nomoreparties.co",headers:{"Content-Type":"application/json"}});var C=function(e){var t=e.name,a=e.isOpen,n=e.onClose,c=e.title,o=e.buttonText,i=e.children,l=e.onSubmit;return r.a.createElement("div",{className:"popup popup_type_".concat(t," ").concat(a&&"popup_opened")},r.a.createElement("div",{className:"popup__container"},r.a.createElement("button",{className:"popup__close",type:"button","aria-label":"\u043a\u043d\u043e\u043f\u043a\u0430 \u0437\u0430\u043a\u0440\u044b\u0442\u044c \u043f\u043e\u043f\u0430\u043f",onClick:n}),r.a.createElement("form",{className:"popup__form popup__form_type_".concat(t),name:t,method:"get",onSubmit:l},r.a.createElement("h2",{className:"popup__title"},c),i,r.a.createElement("button",{type:"submit",className:"popup__save-button popup__save-button_".concat(t)},o))))};var j=function(e){var t=e.isOpen,a=e.onClose,c=e.onUpdateUser,o=Object(n.useContext)(_),i=Object(n.useState)(o.name),s=Object(l.a)(i,2),u=s[0],m=s[1],p=Object(n.useState)(o.about),d=Object(l.a)(p,2),f=d[0],h=d[1];return r.a.useEffect(function(){t||(m(o.name||""),h(o.about||""))},[t,o]),r.a.createElement(C,{isOpen:t,onClose:a,name:"edit-profile",title:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u043f\u0440\u043e\u0444\u0438\u043b\u044c",buttonText:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c",onSubmit:function(e){e.preventDefault(),c({name:u,about:f})}},r.a.createElement("div",{className:"popup__inputs"},r.a.createElement("div",null,r.a.createElement("input",{className:"popup__input popup__input_type_name",type:"text",placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0412\u0430\u0448\u0435 \u0424\u0418\u041e",name:"profile-name",id:"profile-name",value:u||"",onChange:function(e){m(e.target.value)},required:!0,minLength:"2",maxLength:"40"}),r.a.createElement("span",{id:"profile-name-error",className:"popup__error"})),r.a.createElement("div",null,r.a.createElement("input",{className:"popup__input popup__input_type_bio",type:"text",placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0412\u0430\u0448\u0435 \u0425\u043e\u0431\u0431\u0438",name:"profile-bio",id:"profile-bio",value:f||"",onChange:function(e){h(e.target.value)}}),r.a.createElement("span",{id:"profile-bio-error",className:"popup__error"}))))};var y=function(e){var t=e.isOpen,a=e.onClose,c=e.onUpdateAvatar,o=Object(n.useRef)("");return Object(n.useEffect)(function(){t||(o.current.value="")},[t]),r.a.createElement(C,{isOpen:t,onClose:a,name:"edit-avatar",title:"\u041e\u0431\u043d\u043e\u0432\u0438\u0442\u044c \u0430\u0432\u0430\u0442\u0430\u0440",buttonText:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c",onSubmit:function(e){e.preventDefault(),c({avatar:o.current.value}),e.target.reset()}},r.a.createElement("div",{className:"popup__inputs"},r.a.createElement("input",{ref:o,className:"popup__input popup__input_type_avatar-link",type:"url",placeholder:"\u0421\u0441\u044b\u043b\u043a\u0430 \u043d\u0430 \u043a\u0430\u0440\u0442\u0438\u043d\u043a\u0443",name:"avatar-link",id:"avatar-link",required:!0}),r.a.createElement("span",{id:"avatar-link-error",className:"popup__error"})))};var S=function(e){var t=e.isOpen,a=e.onClose,c=e.onAddPlace,o=Object(n.useState)(""),i=Object(l.a)(o,2),s=i[0],u=i[1],m=Object(n.useState)(""),p=Object(l.a)(m,2),d=p[0],_=p[1];return r.a.createElement(C,{isOpen:t,onClose:a,onSubmit:function(e){e.preventDefault(),c({name:s,link:d}),e.target.reset()},name:"add-card",title:"\u041d\u043e\u0432\u043e\u0435 \u043c\u0435\u0441\u0442\u043e",buttonText:"\u0421\u043e\u0437\u0434\u0430\u0442\u044c"},r.a.createElement("div",{className:"popup__inputs"},r.a.createElement("div",null,r.a.createElement("input",{className:"popup__input popup__input_type_place-name",type:"text",placeholder:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435",name:"card-place-name",id:"card-place-name",required:!0,minLength:"2",maxLength:"30",value:s,onChange:function(e){u(e.target.value)}}),r.a.createElement("span",{id:"card-place-name-error",className:"popup__error"})),r.a.createElement("div",null,r.a.createElement("input",{className:"popup__input popup__input_type_place-image-link",type:"url",placeholder:"\u0421\u0441\u044b\u043b\u043a\u0430 \u043d\u0430 \u043a\u0430\u0440\u0442\u0438\u043d\u043a\u0443",name:"card-image-link",id:"card-image-link",required:!0,value:d,onChange:function(e){_(e.target.value)}}),r.a.createElement("span",{id:"card-image-link-error",className:"popup__error"}))))},w=a(27),x=["element"],z=function(e){var t=e.element,a=Object(w.a)(e,x);return a.isLoggedIn?r.a.createElement(t,a):r.a.createElement(m.a,{to:"/sign-in",replace:!0})};var I=function(e){var t=e.onRegister,a=Object(n.useState)(""),c=Object(l.a)(a,2),o=c[0],i=c[1],s=Object(n.useState)(""),u=Object(l.a)(s,2),m=u[0],d=u[1];return r.a.createElement("section",{className:"authorization"},r.a.createElement("form",{className:"authorization__form",onSubmit:function(e){e.preventDefault(),t(o,m)},name:"register"},r.a.createElement("h2",{className:"authorization__title"},"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f"),r.a.createElement("div",{className:"authorization__inputs"},r.a.createElement("input",{className:"authorization__input",id:"email",name:"email",type:"email",placeholder:"Email",value:o,onChange:function(e){i(e.target.value)}}),r.a.createElement("input",{className:"authorization__input",id:"password",name:"password",type:"password",placeholder:"\u041f\u0430\u0440\u043e\u043b\u044c",value:m,onChange:function(e){d(e.target.value)}})),r.a.createElement("button",{type:"submit",className:"authorization__submit-button"},"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f"),r.a.createElement("div",{className:"authorization__to-sign-in"},"\u0423\u0436\u0435 \u0437\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u043d\u044b?"," ",r.a.createElement(p.a,{to:"/sign-in",className:"authorization__sign-in-link"},"\u0412\u043e\u0439\u0442\u0438"))))};var T=function(e){var t=e.onLogin,a=Object(n.useState)(""),c=Object(l.a)(a,2),o=c[0],i=c[1],s=Object(n.useState)(""),u=Object(l.a)(s,2),m=u[0],p=u[1];return r.a.createElement("section",{className:"authorization"},r.a.createElement("form",{className:"authorization__form",onSubmit:function(e){e.preventDefault(),t(o,m)},name:"register"},r.a.createElement("h2",{className:"authorization__title"},"\u0412\u0445\u043e\u0434"),r.a.createElement("div",{className:"authorization__inputs"},r.a.createElement("input",{className:"authorization__input",id:"email",name:"email",type:"email",placeholder:"Email",value:o,onChange:function(e){var t=e.target;i(t.value)}}),r.a.createElement("input",{className:"authorization__input",id:"password",name:"password",type:"password",placeholder:"\u041f\u0430\u0440\u043e\u043b\u044c",value:m,onChange:function(e){var t=e.target;p(t.value)}})),r.a.createElement("button",{type:"submit",className:"authorization__submit-button"},"\u0412\u043e\u0439\u0442\u0438")))},q=a(25),P=a.n(q),L=a(26),U=a.n(L);var A=function(e){var t=e.isOpen,a=e.onClose,n=e.isConfirmStatus,c=e.message;return r.a.createElement("section",{className:"popup ".concat(t&&"popup_opened")},r.a.createElement("div",{className:"popup__container"},r.a.createElement("button",{className:"popup__close",type:"button",onClick:a}),r.a.createElement("img",{className:"popup__status-image",src:n?P.a:U.a,alt:"\u0421\u0442\u0430\u0442\u0443\u0441 \u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u0438"}),r.a.createElement("h3",{className:"popup__status-title"},c)))},D="\u0427\u0442\u043e-\u0442\u043e \u043f\u043e\u0448\u043b\u043e \u043d\u0435 \u0442\u0430\u043a! \u041f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u0435\u0449\u0435 \u0440\u0430\u0437.",R="\u0412\u044b \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0437\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u043b\u0438\u0441\u044c!";var J=function(){var e=Object(n.useState)(!1),t=Object(l.a)(e,2),a=t[0],c=t[1],o=Object(n.useState)(!1),s=Object(l.a)(o,2),u=s[0],p=s[1],f=Object(n.useState)(!1),v=Object(l.a)(f,2),g=v[0],O=v[1],C=Object(n.useState)(!1),w=Object(l.a)(C,2),x=w[0],q=w[1],P=Object(n.useState)(!1),L=Object(l.a)(P,2),U=L[0],J=L[1],B=Object(n.useState)(null),H=Object(l.a)(B,2),M=H[0],F=H[1],G=Object(n.useState)(!1),K=Object(l.a)(G,2),Q=K[0],V=K[1],W=Object(n.useState)({}),X=Object(l.a)(W,2),Y=X[0],Z=X[1],$=Object(n.useState)([]),ee=Object(l.a)($,2),te=ee[0],ae=ee[1],ne=Object(n.useState)(""),re=Object(l.a)(ne,2),ce=re[0],oe=re[1],ie=Object(n.useState)(""),le=Object(l.a)(ie,2),se=le[0],ue=le[1],me=!!localStorage.getItem("loggedIn"),pe=Object(n.useState)(me),de=Object(l.a)(pe,2),_e=de[0],fe=de[1],he=Object(m.p)();Object(n.useEffect)(function(){Ee()},[]),Object(n.useEffect)(function(){_e&&he("/")},[_e,he]),Object(n.useEffect)(function(){_e&&k.getUserInfo().then(function(e){Z(e)}).catch(function(e){return console.log(e)})},[_e]),Object(n.useEffect)(function(){_e&&k.getInitialCards().then(function(e){ae(e)}).catch(function(e){return console.log(e)})},[_e]);var be=function(){q(!0)},Ee=function(){var e=localStorage.getItem("jwt");e&&N.validToken(e).then(function(e){oe(e.data.email),localStorage.setItem("loggedIn","true"),fe(!0),he("/")}).catch(function(e){console.log(e)})};function ve(){O(!1),p(!1),c(!1),F(null),V(!1),q(!1)}return r.a.createElement(r.a.Fragment,null,r.a.createElement(_.Provider,{value:Y},r.a.createElement(d,{email:ce,signOut:function(){localStorage.removeItem("jwt"),fe(!1),oe(""),localStorage.setItem("loggedIn",""),he("/sign-in")}}),r.a.createElement(m.d,null,r.a.createElement(m.b,{exact:!0,path:"/",element:r.a.createElement(z,{element:h,isLoggedIn:_e,onEditProfile:function(){c(!0)},onAddPlace:function(){p(!0)},onEditAvatar:function(){O(!0)},onCardClick:function(e){F(e),V(!0)},onLikeClick:function(e){var t=e.likes.some(function(e){return e._id===Y._id});k.changeLikeCardStatus(e._id,t).then(function(t){ae(function(a){return a.map(function(a){return a._id===e._id?t:a})})}).catch(function(e){return console.log(e)})},onDeleteClick:function(e){e.owner._id===Y._id&&k.deleteCard(e._id).then(function(){ae(function(t){return t.filter(function(t){return t._id!==e._id})})}).catch(function(e){return console.log(e)})},cards:te})}),r.a.createElement(m.b,{path:"/sign-up",element:r.a.createElement(I,{onRegister:function(e,t){N.signUp(e,t).then(function(e){J(!0),ue(R),be(),setTimeout(function(){ve(),he("/sign-in")},2e3)}).catch(function(e){console.log(e),J(!1),ue(D),be()})}})}),r.a.createElement(m.b,{path:"/sign-in",element:r.a.createElement(T,{onLogin:function(e,t){N.signIn(e,t).then(function(t){localStorage.setItem("jwt",t.token),oe(e),fe(!0),he("/")}).catch(function(e){console.log(e),J(!1),ue(D),be()})}})})),r.a.createElement(j,{isOpen:a,onClose:ve,onUpdateUser:function(e){var t=e.name,a=e.about;k.updateProfile(t,a).then(function(e){Z(e),ve()}).catch(function(e){console.log(e)})}}),r.a.createElement(S,{isOpen:u,onClose:ve,onAddPlace:function(e){var t=e.name,a=e.link;k.addCard(t,a).then(function(e){ae([e].concat(Object(i.a)(te))),ve()}).catch(function(e){return console.log(e)})}}),r.a.createElement(y,{isOpen:g,onClose:ve,onUpdateAvatar:function(e){var t=e.avatar;k.updateAvatar(t).then(function(e){Z(e),ve()}).catch(function(e){console.log(e)})}}),r.a.createElement(E,{card:M,onClose:ve,isOpened:Q}),r.a.createElement(A,{isOpen:x,onClose:ve,isConfirmStatus:U,message:se}),r.a.createElement(b,null)))};o.a.createRoot(document.getElementById("root")).render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(p.b,null,r.a.createElement(J,null))))}},[[28,1,2]]]);
//# sourceMappingURL=main.202dee9d.chunk.js.map