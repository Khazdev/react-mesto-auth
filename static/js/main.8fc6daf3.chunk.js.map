{"version":3,"sources":["images/logo.svg","images/success.svg","images/refuse.svg","components/Header.js","contexts/CurrentUserContext.js","components/Card.js","components/Main.js","components/Footer.js","components/ImagePopup.js","utils/Api.js","utils/AuthApi.js","components/PopupWithForm.js","components/EditProfilePopup.js","components/EditAvatarPopup.js","components/AddPlacePopup.js","components/ProtectedRoute.js","components/Register.js","components/Login.js","components/InfoTooltip.js","components/App.js","index.js"],"names":["module","exports","__webpack_require__","p","Header","_ref","email","signOut","React","createElement","className","src","logo","alt","Routes","Route","path","element","Link","to","onClick","CurrentUserContext","createContext","Card","card","onCardClick","onDeleteClick","onLikeClick","currentUser","useContext","isOwn","owner","_id","isLiked","likes","some","i","cardLikeButtonClassName","concat","link","name","type","aria-label","length","Main","cards","onEditAvatar","onEditProfile","onAddPlace","avatar","about","map","key","Footer","lang","ImagePopup","onClose","isOpened","api","Api","options","_classCallCheck","this","baseurl","baseUrl","headers","_createClass","value","uri","fetch","then","_checkResponse","_request","method","body","JSON","stringify","id","_unlikeCard","_likeCard","avatarLink","res","ok","json","Promise","reject","status","authorization","Content-Type","authApi","AuthApi","password","jwt","_objectSpread","Authorization","PopupWithForm","isOpen","title","buttonText","children","onSubmit","EditProfilePopup","onUpdateUser","_useState","useState","_useState2","_slicedToArray","setName","_useState3","_useState4","description","setDescription","useEffect","e","preventDefault","placeholder","onChange","target","required","minLength","maxLength","EditAvatarPopup","onUpdateAvatar","avatarLinkRef","useRef","current","reset","ref","AddPlacePopup","setLink","ProtectedRoute","Component","props","_objectWithoutProperties","_excluded","isLoggedIn","Navigate","replace","Register","onRegister","setEmail","setPassword","Login","onLogin","_ref2","_ref3","InfoTooltip","isConfirmStatus","message","success","fail","ERROR_MESSAGE","SUCCESS_MESSAGE","App","isEditProfilePopupOpen","setIsEditProfilePopupOpen","isAddPlacePopupOpen","setIsAddPlacePopupOpen","_useState5","_useState6","isEditAvatarPopupOpen","setIsEditAvatarPopupOpen","_useState7","_useState8","isInfoTooltipPopupOpen","setIsInfoTooltipPopupOpen","_useState9","_useState10","isSuccessInfoTooltipStatus","setIsSuccessInfoTooltipStatus","_useState11","_useState12","selectedCard","setSelectedCard","_useState13","_useState14","imagePopupOpen","setImagePopupOpen","_useState15","_useState16","setCurrentUser","_useState17","_useState18","setCards","_useState19","_useState20","_useState21","_useState22","infoTooltipMessage","setInfoTooltipMessage","localLoggedIn","localStorage","getItem","_useState23","_useState24","setIsLoggedIn","navigate","useNavigate","handleValidateToken","getUserInfo","response","catch","error","console","log","getInitialCards","cardData","openInfoTooltip","validToken","data","setItem","closeAllPopups","Fragment","Provider","removeItem","exact","changeLikeCardStatus","newCard","state","c","deleteCard","prevCards","filter","signUp","setTimeout","signIn","token","updateProfile","addCard","_toConsumableArray","updateAvatar","ReactDOM","createRoot","document","getElementById","render","StrictMode","BrowserRouter"],"mappings":"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","file":"static/js/main.8fc6daf3.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/logo.7d7dbe54.svg\";","module.exports = __webpack_public_path__ + \"static/media/success.534aabc3.svg\";","module.exports = __webpack_public_path__ + \"static/media/refuse.6063ab0d.svg\";","import logo from \"../images/logo.svg\";\r\nimport React from \"react\";\r\nimport {Link, Route, Routes} from \"react-router-dom\";\r\n\r\nfunction Header({email, signOut}) {\r\n  return (\r\n    <header className=\"header\">\r\n      <img className=\"header__logo\" src={logo} alt=\"Лого\"/>\r\n      <div className=\"header__container\">\r\n        {email && <p className=\"header__email\">{email}</p>}\r\n        <Routes>\r\n          <Route\r\n            path=\"/sign-up\"\r\n            element={\r\n              <Link to=\"/sign-in\" className={`header__link`}>\r\n                Войти\r\n              </Link>\r\n            }\r\n          />\r\n          <Route\r\n            path=\"/sign-in\"\r\n            element={\r\n              <Link to=\"/sign-up\" className={`header__link`}>\r\n                Регистрация\r\n              </Link>\r\n            }\r\n          />\r\n          <Route\r\n            path=\"/\"\r\n            element={\r\n              <Link to=\"/sign-in\" className={`header__link`} onClick={signOut}>\r\n                Выйти\r\n              </Link>\r\n            }\r\n          />\r\n        </Routes>\r\n      </div>\r\n    </header>\r\n  );\r\n}\r\n\r\nexport default Header;\r\n","import {createContext} from \"react\";\r\n\r\nexport const CurrentUserContext = createContext();\r\n","import {CurrentUserContext} from \"../contexts/CurrentUserContext.js\";\r\nimport React, {useContext} from \"react\";\r\n\r\nfunction Card({card, onCardClick, onDeleteClick, onLikeClick}) {\r\n  const currentUser = useContext(CurrentUserContext);\r\n\r\n  const isOwn = card.owner._id === currentUser._id;\r\n  const isLiked = card.likes.some((i) => i._id === currentUser._id);\r\n  const cardLikeButtonClassName = `elements__like-button ${\r\n    isLiked && \"elements__like-button_active\"\r\n  }`;\r\n\r\n  const handleClick = () => {\r\n    onCardClick(card);\r\n  };\r\n  const handleDeleteClick = () => {\r\n    onDeleteClick(card);\r\n  };\r\n  const handleCardLike = () => {\r\n    onLikeClick(card);\r\n  };\r\n\r\n  return (\r\n    <li className=\"elements__list-item\">\r\n      <div className=\"elements__photo-container\" onClick={handleClick}>\r\n        <img\r\n          className=\"elements__list-item-photo\"\r\n          src={card.link}\r\n          alt={card.name}\r\n        />\r\n        <div className=\"elements__list-item-overlay\"></div>\r\n      </div>\r\n      <div className=\"elements__list-item-description\">\r\n        <h2 className=\"elements__list-item-header\">{card.name}</h2>\r\n        <div className=\"elements__like-container\">\r\n          <button\r\n            className={cardLikeButtonClassName}\r\n            type=\"button\"\r\n            aria-label=\"сердечко-лайк\"\r\n            onClick={handleCardLike}\r\n          ></button>\r\n          <span className=\"elements__like-counter\">{card.likes.length}</span>\r\n        </div>\r\n      </div>\r\n      {isOwn && (\r\n        <button\r\n          className=\"elements__del-button\"\r\n          aria-label=\"кнопка удаления карточки\"\r\n          onClick={handleDeleteClick}\r\n        />\r\n      )}\r\n    </li>\r\n  );\r\n}\r\n\r\nexport default Card;\r\n","import React, {useContext} from \"react\";\r\nimport Card from \"./Card\";\r\nimport {CurrentUserContext} from \"../contexts/CurrentUserContext.js\";\r\n\r\nfunction Main({\r\n                cards,\r\n                onEditAvatar,\r\n                onEditProfile,\r\n                onAddPlace,\r\n                onCardClick,\r\n                onDeleteClick,\r\n                onLikeClick,\r\n              }) {\r\n  const currentUser = useContext(CurrentUserContext);\r\n\r\n  const {avatar, name, about} = currentUser;\r\n  return (\r\n    <main className=\"content\">\r\n      <section className=\"profile\">\r\n        <div className=\"profile__avatar-container\" onClick={onEditAvatar}>\r\n          <img\r\n            className=\"profile__avatar\"\r\n            src={avatar}\r\n            alt=\"Фотография-аватар\"\r\n          />\r\n        </div>\r\n        <div className=\"profile__info\">\r\n          <h1 className=\"profile__name\">{name}</h1>\r\n          <button\r\n            className=\"profile__edit-button\"\r\n            type=\"button\"\r\n            aria-label=\"редактировать профиль\"\r\n            onClick={onEditProfile}\r\n          ></button>\r\n          <p className=\"profile__bio\">{about}</p>\r\n        </div>\r\n        <button\r\n          className=\"profile__add-button\"\r\n          type=\"button\"\r\n          aria-label=\"Добавить фото-карточку\"\r\n          onClick={onAddPlace}\r\n        ></button>\r\n      </section>\r\n      <section className=\"elements\" aria-label=\"карточки\">\r\n        <ul className=\"elements__list\">\r\n          {cards.map((card) => (\r\n            <Card\r\n              key={card._id}\r\n              card={card}\r\n              onCardClick={onCardClick}\r\n              onDeleteClick={onDeleteClick}\r\n              onLikeClick={onLikeClick}\r\n            />\r\n          ))}\r\n        </ul>\r\n      </section>\r\n    </main>\r\n  );\r\n}\r\n\r\nexport default Main;\r\n","import React from \"react\";\r\n\r\nfunction Footer() {\r\n  return (\r\n    <footer className=\"footer\">\r\n      <p className=\"footer__copyright\" lang=\"en\">\r\n        &copy; 2023 Mesto Russia\r\n      </p>\r\n    </footer>\r\n  );\r\n}\r\n\r\nexport default Footer;\r\n","import React from \"react\";\r\n\r\nfunction ImagePopup({card, onClose, isOpened}) {\r\n  const handleClose = () => {\r\n    onClose();\r\n  };\r\n\r\n  return (\r\n    <section\r\n      className={`popup popup_type_image ${isOpened && \"popup_opened\"}`}\r\n      aria-label=\"увеличенные картинки\"\r\n    >\r\n      {card && (\r\n        <figure className=\"popup__image-container\">\r\n          <button\r\n            className=\"popup__close\"\r\n            type=\"button\"\r\n            aria-label=\"кнопка закрыть попап\"\r\n            onClick={handleClose}\r\n          ></button>\r\n          <img className=\"popup__image\" src={`${card.link}`} alt={card.name}/>\r\n          <figcaption className=\"popup__image-label\">{card.name}</figcaption>\r\n        </figure>\r\n      )}\r\n    </section>\r\n  );\r\n}\r\n\r\nexport default ImagePopup;\r\n","class Api {\r\n  constructor(options) {\r\n    // тело конструктора\r\n    this.baseurl = options.baseUrl;\r\n    this.headers = options.headers;\r\n  }\r\n\r\n  _request(uri, options) {\r\n    return fetch(this.baseurl + uri, options).then(this._checkResponse);\r\n  }\r\n\r\n  getInitialCards() {\r\n    return this._request(`/cards`, {\r\n      headers: this.headers,\r\n    });\r\n  }\r\n\r\n  getUserInfo() {\r\n    return this._request(`/users/me`, {\r\n      headers: this.headers,\r\n    });\r\n  }\r\n\r\n  updateProfile(name, about) {\r\n    return this._request(`/users/me`, {\r\n      method: \"PATCH\",\r\n      headers: this.headers,\r\n      body: JSON.stringify({\r\n        name: name,\r\n        about: about,\r\n      }),\r\n    });\r\n  }\r\n\r\n  addCard(name, link) {\r\n    return this._request(`/cards`, {\r\n      method: \"POST\",\r\n      headers: this.headers,\r\n      body: JSON.stringify({\r\n        name: name,\r\n        link: link,\r\n      }),\r\n    });\r\n  }\r\n\r\n  deleteCard(id) {\r\n    return this._request(`/cards/${id}`, {\r\n      method: \"DELETE\",\r\n      headers: this.headers,\r\n    });\r\n  }\r\n\r\n  _likeCard(id) {\r\n    return this._request(`/cards/${id}/likes`, {\r\n      method: \"PUT\",\r\n      headers: this.headers,\r\n    });\r\n  }\r\n\r\n  _unlikeCard(id) {\r\n    return this._request(`/cards/${id}/likes`, {\r\n      method: \"DELETE\",\r\n      headers: this.headers,\r\n    });\r\n  }\r\n\r\n  changeLikeCardStatus(id, isLiked) {\r\n    return isLiked ? this._unlikeCard(id) : this._likeCard(id);\r\n  }\r\n\r\n  updateAvatar(avatarLink) {\r\n    return this._request(`/users/me/avatar`, {\r\n      method: \"PATCH\",\r\n      headers: this.headers,\r\n      body: JSON.stringify({\r\n        avatar: avatarLink,\r\n      }),\r\n    });\r\n  }\r\n\r\n  _checkResponse(res) {\r\n    if (res.ok) {\r\n      return res.json();\r\n    }\r\n    return Promise.reject(`Error: ${res.status}`);\r\n  }\r\n}\r\n\r\nexport const api = new Api({\r\n  baseUrl: \"https://mesto.nomoreparties.co/v1/cohort-76\",\r\n  headers: {\r\n    authorization: \"beb01290-b862-4e63-9356-a8cedbbf4df4\",\r\n    \"Content-Type\": \"application/json\",\r\n  },\r\n});\r\n","class AuthApi {\r\n  constructor(options) {\r\n    // тело конструктора\r\n    this.baseurl = options.baseUrl;\r\n    this.headers = options.headers;\r\n  }\r\n\r\n  _request(uri, options) {\r\n    return fetch(this.baseurl + uri, options).then(this._checkResponse);\r\n  }\r\n\r\n  _checkResponse(res) {\r\n    if (res.ok) {\r\n      return res.json();\r\n    }\r\n    return Promise.reject(`Error: ${res.status}`);\r\n  }\r\n\r\n  signUp(email, password) {\r\n    return this._request(`/signup`, {\r\n      method: \"POST\",\r\n      headers: this.headers,\r\n      body: JSON.stringify({\r\n        password: password,\r\n        email: email,\r\n      }),\r\n    });\r\n  }\r\n\r\n  signIn(email, password) {\r\n    return this._request(`/signin`, {\r\n      method: \"POST\",\r\n      headers: this.headers,\r\n      body: JSON.stringify({\r\n        password: password,\r\n        email: email,\r\n      }),\r\n    });\r\n  }\r\n\r\n  validToken(jwt) {\r\n    return this._request(`/users/me`, {\r\n      method: \"GET\",\r\n      headers: {\r\n        ...this.headers,\r\n        \"Authorization\": `Bearer ${jwt}`\r\n      },\r\n    });\r\n  }\r\n}\r\n\r\nexport const authApi = new AuthApi({\r\n  baseUrl: \"https://auth.nomoreparties.co\",\r\n  headers: {\r\n    \"Content-Type\": \"application/json\",\r\n  },\r\n});\r\n","import React from \"react\";\r\n\r\nfunction PopupWithForm({name, isOpen, onClose, title, buttonText, children, onSubmit}) {\r\n\r\n  return (\r\n    <div className={`popup popup_type_${name} ${isOpen && \"popup_opened\"}`}>\r\n      <div className=\"popup__container\">\r\n        <button\r\n          className=\"popup__close\"\r\n          type=\"button\"\r\n          aria-label=\"кнопка закрыть попап\"\r\n          onClick={onClose}\r\n        ></button>\r\n        <form\r\n          className={`popup__form popup__form_type_${name}`}\r\n          name={name}\r\n          method=\"get\"\r\n          onSubmit={onSubmit}\r\n        >\r\n          <h2 className=\"popup__title\">{title}</h2>\r\n          {children}\r\n          <button\r\n            type=\"submit\"\r\n            // className={`popup__save-button popup__save-button_${name} popup__save-button_disabled`}\r\n            className={`popup__save-button popup__save-button_${name}`}\r\n            // disabled\r\n          >\r\n            {buttonText}\r\n          </button>\r\n        </form>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default PopupWithForm;\r\n","import React, {useContext, useState} from \"react\";\r\nimport PopupWithForm from \"./PopupWithForm\";\r\n\r\nimport {CurrentUserContext} from \"../contexts/CurrentUserContext\";\r\n\r\nfunction EditProfilePopup({isOpen, onClose, onUpdateUser}) {\r\n  const currentUser = useContext(CurrentUserContext);\r\n  const [name, setName] = useState(currentUser.name);\r\n  const [description, setDescription] = useState(currentUser.about);\r\n\r\n  React.useEffect(() => {\r\n    if (!isOpen) {\r\n      setName(currentUser.name || \"\");\r\n      setDescription(currentUser.about || \"\");\r\n    }\r\n  }, [isOpen, currentUser]);\r\n\r\n  const handleNameChange = (e) => {\r\n    setName(e.target.value);\r\n  };\r\n\r\n  const handleDescriptionChange = (e) => {\r\n    setDescription(e.target.value);\r\n  };\r\n\r\n  function handleSubmit(e) {\r\n    // Запрещаем браузеру переходить по адресу формы\r\n    e.preventDefault();\r\n    // Передаём значения управляемых компонентов во внешний обработчик\r\n    onUpdateUser({\r\n      name,\r\n      about: description,\r\n    });\r\n  }\r\n\r\n  return (\r\n    <PopupWithForm\r\n      isOpen={isOpen}\r\n      onClose={onClose}\r\n      name=\"edit-profile\"\r\n      title=\"Редактировать профиль\"\r\n      buttonText=\"Сохранить\"\r\n      onSubmit={handleSubmit}\r\n    >\r\n      <div className=\"popup__inputs\">\r\n        <div>\r\n          <input\r\n            className=\"popup__input popup__input_type_name\"\r\n            type=\"text\"\r\n            placeholder=\"Введите Ваше ФИО\"\r\n            name=\"profile-name\"\r\n            id=\"profile-name\"\r\n            value={name || ''}\r\n            onChange={handleNameChange}\r\n            required\r\n            minLength=\"2\"\r\n            maxLength=\"40\"\r\n          />\r\n          <span id=\"profile-name-error\" className=\"popup__error\"></span>\r\n        </div>\r\n        <div>\r\n          <input\r\n            className=\"popup__input popup__input_type_bio\"\r\n            type=\"text\"\r\n            placeholder=\"Введите Ваше Хобби\"\r\n            name=\"profile-bio\"\r\n            id=\"profile-bio\"\r\n            value={description || ''}\r\n            onChange={handleDescriptionChange}\r\n          />\r\n          <span id=\"profile-bio-error\" className=\"popup__error\"></span>\r\n        </div>\r\n      </div>\r\n    </PopupWithForm>\r\n  );\r\n}\r\n\r\nexport default EditProfilePopup;\r\n","import React, {useEffect, useRef} from \"react\";\r\nimport PopupWithForm from \"./PopupWithForm\";\r\n\r\nfunction EditAvatarPopup({isOpen, onClose, onUpdateAvatar}) {\r\n  const avatarLinkRef = useRef(\"\");\r\n\r\n  const handleSubmit = (e) => {\r\n    e.preventDefault();\r\n    onUpdateAvatar({\r\n      avatar: avatarLinkRef.current.value,\r\n    });\r\n    e.target.reset()\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (!isOpen) {\r\n      avatarLinkRef.current.value = \"\";\r\n    }\r\n  }, [isOpen]);\r\n  return (\r\n    <PopupWithForm\r\n      isOpen={isOpen}\r\n      onClose={onClose}\r\n      name=\"edit-avatar\"\r\n      title=\"Обновить аватар\"\r\n      buttonText=\"Сохранить\"\r\n      onSubmit={handleSubmit}\r\n    >\r\n      <div className=\"popup__inputs\">\r\n        <input\r\n          ref={avatarLinkRef}\r\n          className=\"popup__input popup__input_type_avatar-link\"\r\n          type=\"url\"\r\n          placeholder=\"Ссылка на картинку\"\r\n          name=\"avatar-link\"\r\n          id=\"avatar-link\"\r\n          required\r\n        />\r\n        <span id=\"avatar-link-error\" className=\"popup__error\"></span>\r\n      </div>\r\n    </PopupWithForm>\r\n  );\r\n}\r\n\r\nexport default EditAvatarPopup;\r\n","import PopupWithForm from \"./PopupWithForm\";\r\nimport React, {useState} from \"react\";\r\n\r\nfunction AddPlacePopup({isOpen, onClose, onAddPlace}) {\r\n\r\n  const [name, setName] = useState(\"\");\r\n  const [link, setLink] = useState(\"\");\r\n\r\n  const handleCardNameChange = (e) => {\r\n    setName(e.target.value);\r\n  };\r\n\r\n  const handleCardLinkChange = (e) => {\r\n    setLink(e.target.value);\r\n  };\r\n\r\n  const handleSubmit = (e) => {\r\n    e.preventDefault();\r\n    onAddPlace({\r\n      name,\r\n      link\r\n    });\r\n    e.target.reset()\r\n  };\r\n\r\n  return (\r\n    <PopupWithForm\r\n      isOpen={isOpen}\r\n      onClose={onClose}\r\n      onSubmit={handleSubmit}\r\n      name=\"add-card\"\r\n      title=\"Новое место\"\r\n      buttonText=\"Создать\"\r\n    >\r\n      <div className=\"popup__inputs\">\r\n        <div>\r\n          <input\r\n            className=\"popup__input popup__input_type_place-name\"\r\n            type=\"text\"\r\n            placeholder=\"Название\"\r\n            name=\"card-place-name\"\r\n            id=\"card-place-name\"\r\n            required\r\n            minLength=\"2\"\r\n            maxLength=\"30\"\r\n            value={name}\r\n            onChange={handleCardNameChange}\r\n          />\r\n          <span id=\"card-place-name-error\" className=\"popup__error\"></span>\r\n        </div>\r\n        <div>\r\n          <input\r\n            className=\"popup__input popup__input_type_place-image-link\"\r\n            type=\"url\"\r\n            placeholder=\"Ссылка на картинку\"\r\n            name=\"card-image-link\"\r\n            id=\"card-image-link\"\r\n            required\r\n            value={link}\r\n            onChange={handleCardLinkChange}\r\n          />\r\n          <span id=\"card-image-link-error\" className=\"popup__error\"></span>\r\n        </div>\r\n      </div>\r\n    </PopupWithForm>\r\n  )\r\n}\r\n\r\nexport default AddPlacePopup\r\n","import React from 'react';\r\nimport {Navigate} from \"react-router-dom\";\r\n\r\nconst ProtectedRoute = ({element: Component, ...props}) => {\r\n  return (\r\n    props.isLoggedIn ? <Component {...props} /> : <Navigate to=\"/sign-in\" replace/>\r\n  )\r\n}\r\n\r\nexport default ProtectedRoute;\r\n","import React, {useState} from \"react\";\r\nimport {Link} from \"react-router-dom\";\r\n\r\nfunction Register({onRegister}) {\r\n  const [email, setEmail] = useState(\"\");\r\n  const [password, setPassword] = useState(\"\");\r\n\r\n  function handleEmailChange(e) {\r\n    setEmail(e.target.value);\r\n  }\r\n\r\n  function handlePasswordChange(e) {\r\n    setPassword(e.target.value);\r\n  }\r\n\r\n  function handleSubmit(e) {\r\n    e.preventDefault();\r\n    onRegister(email, password);\r\n  }\r\n\r\n  return (\r\n    <section className=\"authorization\">\r\n      <form\r\n        className=\"authorization__form\"\r\n        onSubmit={handleSubmit}\r\n        name=\"register\"\r\n      >\r\n        <h2 className=\"authorization__title\">Регистрация</h2>\r\n        <div className=\"authorization__inputs\">\r\n          <input\r\n            className=\"authorization__input\"\r\n            id=\"email\"\r\n            name=\"email\"\r\n            type=\"email\"\r\n            placeholder=\"Email\"\r\n            value={email}\r\n            onChange={handleEmailChange}\r\n          />\r\n\r\n          <input\r\n            className=\"authorization__input\"\r\n            id=\"password\"\r\n            name=\"password\"\r\n            type=\"password\"\r\n            placeholder=\"Пароль\"\r\n            value={password}\r\n            onChange={handlePasswordChange}\r\n          />\r\n        </div>\r\n\r\n        <button type=\"submit\" className=\"authorization__submit-button\">\r\n          Зарегистрироваться\r\n        </button>\r\n        <div className=\"authorization__to-sign-in\">Уже зарегистрированы?{\" \"}\r\n          <Link to=\"/sign-in\" className=\"authorization__sign-in-link\">\r\n            Войти\r\n          </Link>\r\n        </div>\r\n      </form>\r\n    </section>\r\n  );\r\n}\r\n\r\nexport default Register;\r\n","import React, {useState} from \"react\";\r\n\r\nfunction Login({onLogin}) {\r\n  const [email, setEmail] = useState(\"\");\r\n  const [password, setPassword] = useState(\"\");\r\n\r\n  function handleEmailChange({target}) {\r\n    setEmail(target.value);\r\n  }\r\n\r\n  function handlePasswordChange({target}) {\r\n    setPassword(target.value);\r\n  }\r\n\r\n  function handleSubmit(e) {\r\n    e.preventDefault();\r\n    onLogin(email, password);\r\n  }\r\n\r\n  return (\r\n    <section className=\"authorization\">\r\n      <form\r\n        className=\"authorization__form\"\r\n        onSubmit={handleSubmit}\r\n        name=\"register\"\r\n      >\r\n        <h2 className=\"authorization__title\">Вход</h2>\r\n        <div className=\"authorization__inputs\">\r\n          <input\r\n            className=\"authorization__input\"\r\n            id=\"email\"\r\n            name=\"email\"\r\n            type=\"email\"\r\n            placeholder=\"Email\"\r\n            value={email}\r\n            onChange={handleEmailChange}\r\n          />\r\n\r\n          <input\r\n            className=\"authorization__input\"\r\n            id=\"password\"\r\n            name=\"password\"\r\n            type=\"password\"\r\n            placeholder=\"Пароль\"\r\n            value={password}\r\n            onChange={handlePasswordChange}\r\n          />\r\n        </div>\r\n\r\n        <button type=\"submit\"\r\n                className=\"authorization__submit-button\"\r\n        >\r\n          Войти\r\n        </button>\r\n      </form>\r\n    </section>\r\n  );\r\n}\r\n\r\nexport default Login;\r\n","import React from \"react\";\r\nimport success from \"../images/success.svg\";\r\nimport fail from \"../images/refuse.svg\";\r\n\r\nfunction InfoTooltip({isOpen, onClose, isConfirmStatus, message}) {\r\n  return (\r\n    <section className={`popup ${isOpen && \"popup_opened\"}`}>\r\n      <div className=\"popup__container\">\r\n        <button\r\n          className=\"popup__close\"\r\n          type=\"button\"\r\n          onClick={onClose}\r\n        />\r\n        <img\r\n          className=\"popup__status-image\"\r\n          src={isConfirmStatus ? success : fail}\r\n          alt={`Статус регистрации`}\r\n        />\r\n        <h3 className=\"popup__status-title\">\r\n          {message}\r\n        </h3>\r\n      </div>\r\n    </section>\r\n  );\r\n}\r\n\r\nexport default InfoTooltip;\r\n","import Header from \"./Header\";\r\nimport Main from \"./Main\";\r\nimport Footer from \"./Footer\";\r\nimport React, {useEffect, useState} from \"react\";\r\nimport ImagePopup from \"./ImagePopup\";\r\nimport {api} from \"../utils/Api\";\r\nimport {authApi} from \"../utils/AuthApi\";\r\nimport {CurrentUserContext} from \"../contexts/CurrentUserContext.js\";\r\nimport EditProfilePopup from \"./EditProfilePopup\";\r\nimport EditAvatarPopup from \"./EditAvatarPopup\";\r\nimport AddPlacePopup from \"./AddPlacePopup\"\r\nimport {Route, Routes, useNavigate} from \"react-router-dom\";\r\nimport ProtectedRoute from \"./ProtectedRoute\";\r\nimport Register from \"./Register\";\r\nimport Login from \"./Login\";\r\nimport InfoTooltip from \"./InfoTooltip\";\r\n\r\nconst ERROR_MESSAGE = \"Что-то пошло не так! Попробуйте еще раз.\";\r\n\r\nconst SUCCESS_MESSAGE = \"Вы успешно зарегистрировались!\";\r\n\r\nfunction App() {\r\n  const [isEditProfilePopupOpen, setIsEditProfilePopupOpen] = useState(false);\r\n  const [isAddPlacePopupOpen, setIsAddPlacePopupOpen] = useState(false);\r\n  const [isEditAvatarPopupOpen, setIsEditAvatarPopupOpen] = useState(false);\r\n  const [isInfoTooltipPopupOpen, setIsInfoTooltipPopupOpen] = useState(false);\r\n  const [isSuccessInfoTooltipStatus, setIsSuccessInfoTooltipStatus] = useState(false);\r\n  const [selectedCard, setSelectedCard] = useState(null);\r\n  const [imagePopupOpen, setImagePopupOpen] = useState(false);\r\n  const [currentUser, setCurrentUser] = useState({});\r\n  const [cards, setCards] = useState([]);\r\n  const [email, setEmail] = useState(\"\");\r\n  const [infoTooltipMessage, setInfoTooltipMessage] = useState(\"\");\r\n  const localLoggedIn = !!localStorage.getItem('loggedIn')\r\n  const [isLoggedIn, setIsLoggedIn] = useState(localLoggedIn);\r\n  const navigate = useNavigate();\r\n\r\n  useEffect(() => {\r\n    handleValidateToken();\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    if (isLoggedIn) {\r\n      navigate(\"/\")\r\n    }\r\n  }, [isLoggedIn, navigate]);\r\n\r\n  useEffect(() => {\r\n    if (isLoggedIn) {\r\n      api\r\n        .getUserInfo()\r\n        .then((response) => {\r\n          setCurrentUser(response);\r\n        })\r\n        .catch((error) => console.log(error));\r\n    }\r\n\r\n  }, [isLoggedIn]);\r\n\r\n  useEffect(() => {\r\n    if (isLoggedIn) {\r\n      api\r\n        .getInitialCards()\r\n        .then((cardData) => {\r\n          setCards(cardData);\r\n        })\r\n        .catch((error) => console.log(error));\r\n    }\r\n  }, [isLoggedIn]);\r\n\r\n  const handleUpdateUser = ({name, about}) => {\r\n    api\r\n      .updateProfile(name, about)\r\n      .then((data) => {\r\n        setCurrentUser(data);\r\n        closeAllPopups();\r\n      })\r\n      .catch((error) => {\r\n        console.log(error);\r\n      });\r\n  };\r\n\r\n  const handleSignUp = (email, password) => {\r\n    authApi.signUp(email, password)\r\n      .then((res) => {\r\n        setIsSuccessInfoTooltipStatus(true);\r\n        setInfoTooltipMessage(SUCCESS_MESSAGE)\r\n        openInfoTooltip();\r\n        setTimeout(() => {\r\n          closeAllPopups();\r\n          navigate(\"/sign-in\");\r\n        }, 2000)\r\n      })\r\n      .catch((error) => {\r\n        console.log(error);\r\n        setIsSuccessInfoTooltipStatus(false);\r\n        setInfoTooltipMessage(ERROR_MESSAGE)\r\n        openInfoTooltip();\r\n      })\r\n  }\r\n\r\n  const openInfoTooltip = () => {\r\n    setIsInfoTooltipPopupOpen(true);\r\n  }\r\n\r\n  const handleSignIn = (email, password) => {\r\n    authApi.signIn(email, password)\r\n      .then((res) => {\r\n        localStorage.setItem(\"jwt\", res.token);\r\n        setEmail(email);\r\n        setIsLoggedIn(true)\r\n        navigate('/')\r\n      })\r\n      .catch((error) => {\r\n        console.log(error);\r\n        setIsSuccessInfoTooltipStatus(false);\r\n        setInfoTooltipMessage(ERROR_MESSAGE)\r\n        openInfoTooltip();\r\n      })\r\n  }\r\n\r\n  const handleValidateToken = () => {\r\n    const jwt = localStorage.getItem(\"jwt\");\r\n    if (jwt) {\r\n      authApi.validToken(jwt)\r\n        .then((res) => {\r\n          setEmail(res.data.email)\r\n          localStorage.setItem('loggedIn', \"true\")\r\n          setIsLoggedIn(true)\r\n          navigate('/')\r\n        })\r\n        .catch((error) => {\r\n          console.log(error);\r\n        })\r\n    }\r\n  }\r\n\r\n  function handleSignOut() {\r\n    localStorage.removeItem(\"jwt\");\r\n    setIsLoggedIn(false);\r\n    setEmail(\"\")\r\n    localStorage.setItem('loggedIn', \"\")\r\n    navigate(\"/sign-in\");\r\n  }\r\n\r\n  const handleUpdateAvatar = ({avatar}) => {\r\n    api\r\n      .updateAvatar(avatar)\r\n      .then((data) => {\r\n        setCurrentUser(data);\r\n        closeAllPopups();\r\n      })\r\n      .catch((error) => {\r\n        console.log(error);\r\n      });\r\n  };\r\n\r\n  const handleCardClick = (card) => {\r\n    setSelectedCard(card);\r\n    setImagePopupOpen(true);\r\n  };\r\n\r\n  function handleEditAvatarClick() {\r\n    setIsEditAvatarPopupOpen(true);\r\n  }\r\n\r\n  function handleEditProfileClick() {\r\n    setIsEditProfilePopupOpen(true);\r\n  }\r\n\r\n  function handleAddPlaceClick() {\r\n    setIsAddPlacePopupOpen(true);\r\n  }\r\n\r\n  function closeAllPopups() {\r\n    setIsEditAvatarPopupOpen(false);\r\n    setIsAddPlacePopupOpen(false);\r\n    setIsEditProfilePopupOpen(false);\r\n    setSelectedCard(null);\r\n    setImagePopupOpen(false);\r\n    setIsInfoTooltipPopupOpen(false);\r\n  }\r\n\r\n  function handleCardLike(card) {\r\n    // Снова проверяем, есть ли уже лайк на этой карточке\r\n    const isLiked = card.likes.some((i) => i._id === currentUser._id);\r\n    api\r\n      .changeLikeCardStatus(card._id, isLiked)\r\n      .then((newCard) => {\r\n        setCards((state) =>\r\n          state.map((c) => (c._id === card._id ? newCard : c)),\r\n        );\r\n      })\r\n      .catch((error) => console.log(error));\r\n  }\r\n\r\n  function handleCardDelete(card) {\r\n    const isOwn = card.owner._id === currentUser._id;\r\n    if (isOwn) {\r\n      api\r\n        .deleteCard(card._id)\r\n        .then(() => {\r\n          setCards((prevCards) => prevCards.filter((c) => c._id !== card._id));\r\n        })\r\n        .catch((error) => console.log(error));\r\n    }\r\n  }\r\n\r\n  function handleAddPlaceSubmit({name, link}) {\r\n    api\r\n      .addCard(name, link)\r\n      .then((res) => {\r\n        setCards([res, ...cards])\r\n        closeAllPopups();\r\n      })\r\n      .catch((error) => console.log(error));\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <CurrentUserContext.Provider value={currentUser}>\r\n        <Header email={email} signOut={handleSignOut}/>\r\n        <Routes>\r\n          <Route exact path=\"/\" element={<ProtectedRoute element={Main}\r\n                                                         isLoggedIn={isLoggedIn}\r\n                                                         onEditProfile={handleEditProfileClick}\r\n                                                         onAddPlace={handleAddPlaceClick}\r\n                                                         onEditAvatar={handleEditAvatarClick}\r\n                                                         onCardClick={handleCardClick}\r\n                                                         onLikeClick={handleCardLike}\r\n                                                         onDeleteClick={handleCardDelete}\r\n                                                         cards={cards}/>}>\r\n          </Route>\r\n          <Route path=\"/sign-up\" element={<Register onRegister={handleSignUp}/>}/>\r\n          <Route path=\"/sign-in\" element={<Login onLogin={handleSignIn}/>}/>\r\n        </Routes>\r\n\r\n        <EditProfilePopup\r\n          isOpen={isEditProfilePopupOpen}\r\n          onClose={closeAllPopups}\r\n          onUpdateUser={handleUpdateUser}\r\n        />\r\n\r\n        <AddPlacePopup\r\n          isOpen={isAddPlacePopupOpen}\r\n          onClose={closeAllPopups}\r\n          onAddPlace={handleAddPlaceSubmit}\r\n        />\r\n\r\n        <EditAvatarPopup\r\n          isOpen={isEditAvatarPopupOpen}\r\n          onClose={closeAllPopups}\r\n          onUpdateAvatar={handleUpdateAvatar}\r\n        />\r\n\r\n        <ImagePopup\r\n          card={selectedCard}\r\n          onClose={closeAllPopups}\r\n          isOpened={imagePopupOpen}\r\n        />\r\n\r\n        <InfoTooltip\r\n          isOpen={isInfoTooltipPopupOpen}\r\n          onClose={closeAllPopups}\r\n          isConfirmStatus={isSuccessInfoTooltipStatus}\r\n          message={infoTooltipMessage}\r\n        />\r\n\r\n        <Footer/>\r\n      </CurrentUserContext.Provider>\r\n    </>\r\n  );\r\n}\r\n\r\nexport default App;\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom/client';\r\nimport './index.css';\r\nimport App from './components/App';\r\nimport {BrowserRouter} from 'react-router-dom';\r\n\r\nconst root = ReactDOM.createRoot(document.getElementById('root'));\r\nroot.render(\r\n  <React.StrictMode>\r\n    <BrowserRouter>\r\n      <App/>\r\n    </BrowserRouter>\r\n  </React.StrictMode>\r\n);\r\n"],"sourceRoot":""}